<!DOCTYPE html>

<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>API Test</title>
<style>body{font-family:monospace;background:#111;color:#eee;padding:20px;font-size:13px}
input{width:100%;padding:10px;margin:8px 0;background:#222;border:1px solid #444;color:#eee;border-radius:6px;font-size:13px}
button{padding:10px 20px;background:#6366f1;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:13px;margin:4px}
pre{background:#1a1a2e;padding:12px;border-radius:8px;overflow-x:auto;white-space:pre-wrap;word-break:break-all;margin:8px 0;border:1px solid #333}
.ok{color:#10b981}.err{color:#ef4444}.warn{color:#f59e0b}
</style></head><body>
<h2>ğŸ”§ Finnhub API Tester</h2>
<input id="key" placeholder="Cola a tua Finnhub API Key" />
<div>
<button onclick="testAll()">Testar Tudo</button>
<button onclick="testQuote()">Quote AAPL</button>
<button onclick="testCandle()">Candles AAPL</button>
<button onclick="testForex()">Forex EUR/USD</button>
<button onclick="testCrypto()">Crypto BTC</button>
</div>
<div id="log"></div>
<script>
function log(msg, cls) {
  document.getElementById('log').innerHTML += '<div class="' + (cls||'') + '">' + msg + '</div>';
}
function logPre(data) {
  document.getElementById('log').innerHTML += '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
}

async function fetchAPI(url, label) {
var k = document.getElementById(â€˜keyâ€™).value.trim();
if (!k) { log(â€˜âŒ Introduz a API key!â€™, â€˜errâ€™); return null; }
var full = url + (url.includes(â€™?â€™) ? â€˜&â€™ : â€˜?â€™) + â€˜token=â€™ + k;
log(â€™<br>ğŸ“¡ <b>â€™ + label + â€˜</b>â€™, â€˜warnâ€™);
log(â€™URL: â€™ + full.replace(k, â€˜KEY***â€™));
try {
var r = await fetch(full);
log(â€™Status: â€™ + r.status + â€™ â€™ + r.statusText, r.ok ? â€˜okâ€™ : â€˜errâ€™);
if (!r.ok) {
var text = await r.text();
log(â€™Response: â€™ + text, â€˜errâ€™);
return null;
}
var data = await r.json();
logPre(data);
return data;
} catch(e) {
log(â€™âŒ Fetch error: â€™ + e.message, â€˜errâ€™);
return null;
}
}

async function testQuote() {
document.getElementById(â€˜logâ€™).innerHTML = â€˜â€™;
await fetchAPI(â€˜https://finnhub.io/api/v1/quote?symbol=AAPLâ€™, â€˜Quote AAPLâ€™);
}

async function testCandle() {
document.getElementById(â€˜logâ€™).innerHTML = â€˜â€™;
var to = Math.floor(Date.now()/1000);
var from = to - 200*86400;
await fetchAPI(â€˜https://finnhub.io/api/v1/stock/candle?symbol=AAPL&resolution=D&from=â€™ + from + â€˜&to=â€™ + to, â€˜Stock Candles AAPL (200 days)â€™);
}

async function testForex() {
document.getElementById(â€˜logâ€™).innerHTML = â€˜â€™;
var to = Math.floor(Date.now()/1000);
var from = to - 200*86400;
await fetchAPI(â€˜https://finnhub.io/api/v1/forex/candle?symbol=OANDA:EUR_USD&resolution=D&from=â€™ + from + â€˜&to=â€™ + to, â€˜Forex Candles EUR/USDâ€™);
}

async function testCrypto() {
document.getElementById(â€˜logâ€™).innerHTML = â€˜â€™;
var to = Math.floor(Date.now()/1000);
var from = to - 200*86400;
await fetchAPI(â€˜https://finnhub.io/api/v1/crypto/candle?symbol=BINANCE:BTCUSDT&resolution=D&from=â€™ + from + â€˜&to=â€™ + to, â€˜Crypto Candles BTCâ€™);
}

async function testAll() {
document.getElementById(â€˜logâ€™).innerHTML = â€˜â€™;
log(â€˜ğŸš€ A testar todos os endpointsâ€¦â€™);
await fetchAPI(â€˜https://finnhub.io/api/v1/quote?symbol=AAPLâ€™, â€˜1. Quote AAPLâ€™);
var to = Math.floor(Date.now()/1000);
var from = to - 30*86400;
await fetchAPI(â€˜https://finnhub.io/api/v1/stock/candle?symbol=AAPL&resolution=D&from=â€™ + from + â€˜&to=â€™ + to, â€˜2. Stock Candles AAPL (30 days)â€™);
await fetchAPI(â€˜https://finnhub.io/api/v1/forex/candle?symbol=OANDA:EUR_USD&resolution=D&from=â€™ + from + â€˜&to=â€™ + to, â€˜3. Forex EUR/USD (30 days)â€™);
await fetchAPI(â€˜https://finnhub.io/api/v1/crypto/candle?symbol=BINANCE:BTCUSDT&resolution=D&from=â€™ + from + â€˜&to=â€™ + to, â€˜4. Crypto BTC (30 days)â€™);
log(â€™<br>âœ… Testes completos!â€™, â€˜okâ€™);
}
</script></body></html>