<!DOCTYPE html>

<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>API Test</title>
<style>body{font-family:-apple-system,sans-serif;background:#111;color:#eee;padding:20px;font-size:14px}
input{width:100%;padding:14px;background:#222;border:2px solid #444;color:#fff;border-radius:10px;font-size:16px;margin:10px 0;outline:none;-webkit-appearance:none}
button{width:100%;padding:14px;background:#6366f1;color:#fff;border:none;border-radius:10px;font-size:16px;font-weight:700;margin:6px 0;cursor:pointer}
#out{background:#1a1a2e;padding:14px;border-radius:10px;margin-top:14px;white-space:pre-wrap;word-break:break-all;font-size:12px;font-family:monospace;line-height:1.6;min-height:100px}
.ok{color:#10b981}.err{color:#ef4444}.warn{color:#f59e0b}
</style></head>
<body>
<h2>ğŸ”§ Teste API Finnhub</h2>
<p style="font-size:12px;color:#888">Cola a key e toca Testar</p>
<input type="text" id="k" placeholder="API Key aqui..." autocomplete="off">
<button onclick="runTest()">ğŸš€ Testar</button>
<div id="out">A aguardar...</div>
<script>
function log(msg,cls){document.getElementById('out').innerHTML+='<span class="'+(cls||'')+'">'+msg+'</span>\n';}
async function runTest(){
  var k=document.getElementById('k').value.trim();
  document.getElementById('out').innerHTML='';
  if(!k){log('âŒ Mete a key!','err');return;}
  log('Key: '+k.substring(0,4)+'***'+k.slice(-4));
  log('');

// Test 1: Quote
log(â€˜â”â”â” Teste 1: Quote AAPL â”â”â”â€™,â€˜warnâ€™);
try{
var u1=â€˜https://finnhub.io/api/v1/quote?symbol=AAPL&token=â€™+k;
log(â€˜URL: â€¦quote?symbol=AAPL&token=***â€™);
var r1=await fetch(u1);
log(â€™HTTP: â€˜+r1.status+â€™ â€™+r1.statusText,r1.ok?â€˜okâ€™:â€˜errâ€™);
var t1=await r1.text();
log(â€™Resp: â€™+t1.substring(0,300));
if(r1.ok){var j1=JSON.parse(t1);log(â€˜PreÃ§o: $â€™+j1.c,â€˜okâ€™);}
}catch(e){log(â€˜ERRO: â€˜+e.message,â€˜errâ€™);}
log(â€™â€™);

// Test 2: Candles
log(â€˜â”â”â” Teste 2: Candles AAPL (30d) â”â”â”â€™,â€˜warnâ€™);
try{
var now=Math.floor(Date.now()/1000);
var ago=now-2592000;
var u2=â€˜https://finnhub.io/api/v1/stock/candle?symbol=AAPL&resolution=D&from=â€™+ago+â€™&to=â€™+now+â€™&token=â€™+k;
log(â€˜URL: â€¦stock/candle?symbol=AAPL&â€¦â€™);
var r2=await fetch(u2);
log(â€™HTTP: â€˜+r2.status+â€™ â€™+r2.statusText,r2.ok?â€˜okâ€™:â€˜errâ€™);
var t2=await r2.text();
log(â€˜Tamanho: â€˜+t2.length+â€™ charsâ€™);
if(r2.ok){var j2=JSON.parse(t2);
if(j2.c&&j2.c.length){log(â€˜âœ… â€˜+j2.c.length+â€™ velas recebidas!â€™,â€˜okâ€™);log(â€˜Ãšltimo fecho: $â€™+j2.c[j2.c.length-1],â€˜okâ€™);}
else{log(â€™âš ï¸ Resposta: â€™+t2.substring(0,200),â€˜warnâ€™);}}
}catch(e){log(â€˜ERRO: â€˜+e.message,â€˜errâ€™);}
log(â€™â€™);

// Test 3: Forex
log(â€˜â”â”â” Teste 3: Forex EUR/USD â”â”â”â€™,â€˜warnâ€™);
try{
var u3=â€˜https://finnhub.io/api/v1/forex/candle?symbol=OANDA:EUR_USD&resolution=D&from=â€™+ago+â€™&to=â€™+now+â€™&token=â€™+k;
var r3=await fetch(u3);
log(â€™HTTP: â€™+r3.status,r3.ok?â€˜okâ€™:â€˜errâ€™);
var t3=await r3.text();
if(r3.ok){var j3=JSON.parse(t3);log(j3.c?â€˜âœ… â€˜+j3.c.length+â€™ velasâ€™:â€™âš ï¸ â€™+t3.substring(0,100),j3.c?â€˜okâ€™:â€˜warnâ€™);}
}catch(e){log(â€˜ERRO: â€˜+e.message,â€˜errâ€™);}
log(â€™â€™);
log(â€˜â”â”â” FIM â”â”â”â€™,â€˜warnâ€™);
}
</script>

</body></html>